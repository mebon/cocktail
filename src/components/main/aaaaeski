import React, { useState, useEffect } from 'react'
import { Card, CardImg, CardTitle, CardText, CardSubtitle, CardBody, CardDeck } from 'reactstrap';
import { Link } from "react-router-dom";

const url = 'https://www.thecocktaildb.com/api/json/v1/1/random.php'

const Random = () => {
  this.state = {
    drink: [],
  };

  const fetchDrink = async () => { const response = await fetch(url); const data = await response.json(); this.setState({ drink: data.drinks }); }
  const fetchDrink2 = async () => { const response = await fetch(url); const data = await response.json(); this.setState({ drink: data.drinks }); }
  const fetchDrink3 = async () => { const response = await fetch(url); const data = await response.json(); this.setState({ drink: data.drinks }); }
  const fetchDrink4 = async () => { const response = await fetch(url); const data = await response.json(); this.setState({ drink: data.drinks }); }

  useEffect(() => { fetchDrink() }, [])
  useEffect(() => { fetchDrink2() }, [])
  useEffect(() => { fetchDrink3() }, [])
  useEffect(() => { fetchDrink4() }, [])

  return (
    <>
      <section className="drinks">
        {this.state.drink.map((drink) => {
          return (
            <div>
                <Card color="dark" key={drink.idDrink}>
                  <a><CardImg top width="225px" height="225px" src={drink.strDrinkThumb} alt={drink.strDrink}></CardImg></a>
                  <CardBody>
                    <CardTitle tag="h5">{drink.strDrink}</CardTitle>
                    <CardText>{drink.strInstructions}</CardText>
                    <Link to={{ pathname: `/search/${drink.idDrink}`, state: { drink: drink.strDrink } }}>View Details</Link>
                  </CardBody>
                </Card>
            </div>
          )

        }
        )
        }
        
      </section>
    </>
  )
}

export default Random